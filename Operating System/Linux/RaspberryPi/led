#!/bin/bash

for (( ; ; )); do
    ping -c 1 -W 1 -q "www.google.com" &> /dev/null
    if [ "$?" != "0" ]; then
        if [ -x /home/pi/.shellscript/lan951x-led-ctl/lan951x-led-ctl ]; then
            sudo sh -c 'sudo /home/pi/.shellscript/lan951x-led-ctl/lan951x-led-ctl --lnk=1 --spd=1'
        fi
        sudo sh -c 'echo input > /sys/class/leds/led1/trigger'
    else
        if [ -x /home/pi/.shellscript/lan951x-led-ctl/lan951x-led-ctl ]; then
            sudo sh -c 'sudo /home/pi/.shellscript/lan951x-led-ctl/lan951x-led-ctl --lnk=0 --spd=0'
        fi
        sudo sh -c 'echo panic > /sys/class/leds/led1/trigger'
    fi

    sleep 10
done

